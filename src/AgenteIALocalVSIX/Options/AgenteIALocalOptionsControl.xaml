<UserControl x:Class="AgenteIALocalVSIX.Options.AgenteIALocalOptionsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:settings="clr-namespace:AgenteIALocal.Core.Settings;assembly=AgenteIALocal.Core"
             Focusable="True">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" Focusable="True">
        <StackPanel Margin="12" Orientation="Vertical" IsEnabled="True" Focusable="True" IsHitTestVisible="True">
            <TextBlock Text="Provider" FontWeight="SemiBold" />
            <ComboBox Margin="0,6,0,12"
                      IsEnabled="True"
                      Focusable="True"
                      SelectedValue="{Binding Provider, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                      SelectedValuePath="Tag">
                <ComboBoxItem Content="LM Studio" Tag="{x:Static settings:AgentProviderType.LmStudio}" />
                <ComboBoxItem Content="Jan Server" Tag="{x:Static settings:AgentProviderType.JanServer}" />
            </ComboBox>

            <GroupBox Header="LM Studio"
                      Visibility="{Binding IsLmStudio, Converter={StaticResource BoolToVis}}"
                      Margin="0,0,0,12">
                <Grid Margin="10" IsEnabled="True" Focusable="True" IsHitTestVisible="True">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="160" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="BaseUrl" VerticalAlignment="Center" />
                    <TextBox x:Name="LmBaseUrlBox" Grid.Row="0" Grid.Column="1" Margin="8,4,0,4"
                             IsReadOnly="False" IsEnabled="True" IsHitTestVisible="True" Focusable="True"
                             Text="{Binding LmStudio.BaseUrl, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBlock Grid.Row="1" Grid.Column="0" Text="ChatCompletionsPath" VerticalAlignment="Center" />
                    <TextBox x:Name="LmChatPathBox" Grid.Row="1" Grid.Column="1" Margin="8,4,0,4"
                             IsReadOnly="False" IsEnabled="True" IsHitTestVisible="True" Focusable="True"
                             Text="{Binding LmStudio.ChatCompletionsPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Model" VerticalAlignment="Center" />
                    <TextBox x:Name="LmModelBox" Grid.Row="2" Grid.Column="1" Margin="8,4,0,4"
                             IsReadOnly="False" IsEnabled="True" IsHitTestVisible="True" Focusable="True"
                             Text="{Binding LmStudio.Model, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBlock Grid.Row="3" Grid.Column="0" Text="ApiKey" VerticalAlignment="Center" />
                    <PasswordBox x:Name="LmApiKeyBox" Grid.Row="3" Grid.Column="1" Margin="8,4,0,4" Focusable="True" />
                </Grid>
            </GroupBox>

            <GroupBox Header="Jan Server"
                      Visibility="{Binding IsJanServer, Converter={StaticResource BoolToVis}}"
                      Margin="0,0,0,12">
                <Grid Margin="10" IsEnabled="True" Focusable="True" IsHitTestVisible="True">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="160" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="BaseUrl" VerticalAlignment="Center" />
                    <TextBox x:Name="JanBaseUrlBox" Grid.Row="0" Grid.Column="1" Margin="8,4,0,4"
                             IsReadOnly="False" IsEnabled="True" IsHitTestVisible="True" Focusable="True"
                             Text="{Binding JanServer.BaseUrl, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBlock Grid.Row="1" Grid.Column="0" Text="ChatCompletionsPath" VerticalAlignment="Center" />
                    <TextBox x:Name="JanChatPathBox" Grid.Row="1" Grid.Column="1" Margin="8,4,0,4"
                             IsReadOnly="False" IsEnabled="True" IsHitTestVisible="True" Focusable="True"
                             Text="{Binding JanServer.ChatCompletionsPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBlock Grid.Row="2" Grid.Column="0" Text="ApiKey" VerticalAlignment="Center" />
                    <PasswordBox x:Name="JanApiKeyBox" Grid.Row="2" Grid.Column="1" Margin="8,4,0,4" Focusable="True" />
                </Grid>
            </GroupBox>
        </StackPanel>
    </ScrollViewer>
</UserControl>
